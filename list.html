<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8">
		<title>我的一天</title>
		<link rel="stylesheet" type="text/css" href="list.css"/>
	</head>
	<body>
		<div class="container">
		
			<div class="header">
				<div class="header-left">
					<h1>我的一天</h1>
					<div>五月十七日 星期日</div>
				</div>
				<div class="header-right">
					<div class="img"><img src="bulb.png" ></div>
					<div>今天</div>
					<div class="img"><img src="arrow.png" ></div>
				</div>
			</div>
			
			<div class="new-todo">
				<img src="plus.png" >
				<input type="text" placeholder="添加任务" />
			</div>
				
			<div id="div-0" class="todo-list">
				<div class="todo-item">
					<div class="todo-icon"><img src="circle1.png"  class="circle"></div>
					<div class="todo-content">
						<div class="todo-task">内容</div>
						<div class="todo-type">任务</div>
					</div>
					<div class="todo-star"><img src="star1.png"></div>
				</div>
			</div>
			
		</div>
	</body>
	
	<script type="text/javascript">
		let add = document.querySelector(".new-todo input");
		let container = document.querySelector(".container");
		let x = 1;
		add.onkeyup = function(event)
		{
			if(event.keyCode == 13)
			{
				console.log(add.value);
				
				let YY = document.querySelector("#div-0");
				let before = document.querySelector("#div-"+(x-1));
				let clone = YY.cloneNode(true);
				clone.setAttribute("id","div-" + x);
				container.insertBefore(clone,before);
				let content = clone.querySelector(".todo-task");
				content.innerText = add.value;
				x = x + 1;
				
				let Input = document.querySelector(".new-todo input");
				Input.placeholder=("添加任务");
				Input.value=("");
				
				let Circle = clone.querySelector(".todo-icon");
				let Star = clone.querySelector(".todo-star");
				Circle.onmouseup = function(event)
				{
					let image1 = Circle.querySelector("img");
					
					if(image1.getAttribute("src") == "circle1.png")
					{
						image1.setAttribute("src","circle2.png");
						content.style.textDecoration = "line-through";
						
						let last = clone;
						container.removeChild(clone);
						container.appendChild(last);
					}
					
					else
					{
						image1.setAttribute("src","circle1.png");
						content.style.textDecoration = "none";
					}
				}
				
				Star.onmouseup = function(event)
				{
					let image2 = Star.querySelector("img");
					
					if(image2.getAttribute("src") == "star1.png")
					{
						image2.setAttribute("src","star2.png");
					}
					
					else
					{
						image2.setAttribute("src","star1.png");
					}
				}
			}
		}
		
	</script>
</html>
